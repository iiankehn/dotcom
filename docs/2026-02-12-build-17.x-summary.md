## 2026-02-12 – Build 17.x Summary

- **Date**: 2026-02-12  
- **Builds**: 17.0.0 (blog data refactor), 17.1.0 (blog admin panel)

### High-level changes

- **Switched the blog to a shared web “database”** so posts are defined in one place instead of being hardcoded in multiple HTML files.
- **Updated all blog and archive pages** to read from that shared data source.
- **Added a local admin panel** so you can create, edit, and delete posts without touching JS or HTML in the codebase.

### Blog data refactor (Build 17.0.0)

- **New shared posts data file**
  - Added `blog/posts.js` as the single source of truth for all blog posts.
  - Each post includes:
    - `slug`, `title`
    - `publishedOn` (ISO date) and `publishedLabel` (display date)
    - `hasArchive`, `archivePath`
    - `indexHtml` (snippet for the main blog page)
    - `articleHtml` (full content for archive pages)
  - Exposed as `window.BLOG_POSTS` in the browser so the public site can render from this data.

- **Main blog index now dynamic**
  - `blog/index.html`:
    - Replaced hardcoded post content with an empty container `header#blog-posts`.
    - Loads `posts.js` and uses a small script to:
      - Sort posts by `publishedOn` (newest first).
      - Render each post’s title, metadata, and `indexHtml` while preserving your Tailwind-based design.

- **Archive pages now use shared data**
  - Updated:
    - `blog/archive/chatgpt-may-be-coming-to-carplay.html`
    - `blog/archive/meta-blames-apple-for-failure.html`
    - `blog/archive/apple-launches-creator-studio.html`
    - `blog/archive/tiktok-was-bought.html`
  - Each page:
    - Uses `header#post-header` as a mount point.
    - Loads `../posts.js`, finds its post by `slug`, and injects the title, published line, and `articleHtml`.
  - Result: all post content is driven from `blog/posts.js`, with HTML pages acting as templates.

### Admin panel (Build 17.1.0)

- **Posts data made reusable for Node and browser**
  - `blog/posts.js` now:
    - Declares `const BLOG_POSTS = [...]`.
    - Sets `window.BLOG_POSTS = BLOG_POSTS` in the browser.
    - Exports `module.exports = BLOG_POSTS` for Node-based tools (admin backend).

- **New Node project metadata**
  - Added `package.json` in the project root:
    - Dependency: `express`.
    - Script: `"admin": "node admin/server.js"` to run the admin server.

- **Admin backend**
  - `admin/server.js`:
    - Express server that:
      - Serves static admin UI files from `admin/`.
      - Loads posts via `require('../blog/posts.js')`.
      - Regenerates `blog/posts.js` when posts change.
    - REST API:
      - `GET /api/posts` – list posts.
      - `GET /api/posts/:slug` – fetch single post.
      - `POST /api/posts` – create post.
      - `PUT /api/posts/:slug` – update post.
      - `DELETE /api/posts/:slug` – delete post.

- **Admin UI**
  - `admin/index.html`:
    - Tailwind-styled, dark UI consistent with the main site.
    - Two-column layout:
      - Left: posts table.
      - Right: editor form.
  - `admin/admin.js`:
    - Fetches posts from the API and renders the table.
    - Populates the editor form on row click.
    - Handles create, update (including slug changes), and delete operations.
    - Writes changes back through the API, which updates `blog/posts.js`.

### How to use the new tooling

- **Run the admin panel locally**
  1. Install dependencies once: `npm install` (from the project root).
  2. Start the admin backend: `npm run admin`.
  3. Open `http://localhost:3000` in a browser.
  4. Manage posts through the UI; changes are saved to `blog/posts.js`.

- **Deploying**
  - After using the admin panel, commit and deploy:
    - Updated `blog/posts.js`.
    - Any new archive HTML files you create for posts that have `hasArchive: true`.

